<style>
    * {        font: 400 19px calibri;    }
    .cand_grid {    display: grid;        grid-template-columns: 1fr 2fr;        margin-left: 1%    }
    .cand_h3 {      font-size: 1.3rem;        line-height: 40px;        margin-top: 20px;    color:darkblue }
    .cand_frm {    width: 300px; padding: 10px;   border: 3px solid #cdf;     border-radius: 15px;    }
    [type="text"], [type="password"], [type="button"] {        width: 96%;        padding: 2%;        border: 1px solid lightblue;        border-radius: 10px;  }
    label, input {        line-height: 40px    }
    [type="text"]:focus, [type="password"]:focus {        outline: none;        border: 2px solid cornflowerblue    }
    [type="button"] {        width: 100%;        color: white;        background-color: dodgerblue;        filter: contrast(250%);    }
    .cand_ref {     color: darkblue;    text-decoration: none;    position: relative;    top: 1em;    }
    .hide {    display: none    }
</style>

<div id="header2">    {{> header2}}        </div>

<div class="cand_grid" id="content">
    <div>
        <a class="cand_ref" onclick="f_candidates_2()">
            <span style="line-height:25px;">                Продолжить как анонимный пользователь            </span>
        </a>
    </div>    
      
    <div>
        <h3 class="cand_h3">&nbsp; Вход в личный кабинет соискателя</h3>
                                                                                                                                       </div> </div> <!--
        <form class="cand_frm" method="post" id="frm_reg">
            <label> Логин: </label>  <br>
            <input type="text" name="login" id="login" value="" /><br>
            <label> Пароль:</label>  <br>
            <input type="password" name="pswrd" id="pswrd" value="" /><br><br>
            <input type="button" value="Передача данных" onclick="f_candidates_1()" />
        </form>
        <input type="checkbox" onclick="f_candidates_0()"> Показывать пароль<br>
        <p id="error" style="line-height:25px;"> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .</p>
    </div>
</div>
<script>
                                                                                            //Обработка формы
    function f_candidates_0() {
        let tp = document.getElementById("pswrd").getAttribute("type");
        if (tp == "password") { document.getElementById("pswrd").setAttribute("type", "text"); }
        else { document.getElementById("pswrd").setAttribute("type", "password"); }
    }
    let login = "0";
    let pswrd = "0";
    let msg = "";
    let ind = "-1";
    async function f_candidates_1() {
        login = document.getElementById("login").value;
        pswrd = document.getElementById("pswrd").value;
        if (login == "" || pswrd == "") {
            msg = "Не все поля формы заполнены. <br>";
            document.getElementById("error").innerText = msg;
            return;
        }
        let params = {};                                                     // отправка учетных данных на сервер
        params["login"] = login;
        params["pswrd"] = pswrd;
        let json = JSON.stringify(params);
        alert(json);
        let response = await fetch('/candidates',
            {  method: 'POST',
                headers: { "Content-Type": "application/json" },
                body: json
            });
        msg = await response.text();           alert(login + " " + pswrd + "  " + msg);
        if (msg == "-1") {     document.getElementById("error").innerText = "Ошибка в задaнии логина или пароля";
                                             return;
                                      }
        // получен индекс  соискателя
        ind = msg;
        document.getElementById("header2_log").innerText = login;
        document.getElementById("header2_ind").innerText = msg;
        document.getElementById("content").classList.add("hide");
        alert(login + " " + pswrd + "  " + msg);
    }
    function f_candidates_2() {             // продолжить как анонимный пользователь
        document.getElementById("header2_log").innerText = "Anonimus";
        document.getElementById("content").classList.add("hide");
        document.getElementById('resume_Cand').classList.add('disabled');
        document.getElementById('search_Cand').classList.add('disabled');
        document.getElementById('history_Cand').classList.add('disabled');
    }
                                                                                                              // Обработка пунктов меню   
    function f_menuCand_1(id, route) {
        document.getElementById(id).setAttribute('href', route + '?' + ind);
        alert(document.getElementById(id).getAttribute('href'));
    }
    const MENU = document.querySelector('.menuCand');
    MENU.addEventListener('mouseover', (event) => { event.target.style.color = "purple"; });
    MENU.addEventListener('mouseout', (event) => { event.target.style.color = "darkgray"; });
 
</script>
-->