<div id="header4">    {{> header4}}        </div>
<link rel="stylesheet" href="css/personalArea.css" />

<div class="personal_area_grid" id="content">
    <div>    </div>
    <div>
        <h3 class="personal_area_h3">&nbsp; Вход в личный кабинет модератора</h3>
        <form class="personal_area_frm" method="post" id="frm_reg">
            <label> Логин: </label>  <br>
            <input type="text" name="login" id="login" value="" /><br>
            <label> Пароль:</label>  <br>
            <input type="password" name="pswrd" id="pswrd" value="" /><br><br>
            <input type="button" value="Передача данных" onclick="f_moderator_1()" />
            <br><br>
            <input type="checkbox" onclick="f_moderator_0()">  <label> Показывать пароль </label> <br>
        </form>
        <p id="error" style="line-height:25px;font:400  1.1rem calibri"> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .</p>
    </div>
</div>

<script>
    function f_moderator_0() {                                  // скрывать/показывать пароль
        let tp = document.getElementById("pswrd").getAttribute("type");
        if (tp == "password") { document.getElementById("pswrd").setAttribute("type", "text"); }
        else { document.getElementById("pswrd").setAttribute("type", "password"); }
    }
    let login = "0";
    let pswrd = "0";
    let msg = "";
    let ind = "-1";
    async function f_moderator_1() {                  //   отправка данных на сервер
        login = document.getElementById("login").value;
        pswrd = document.getElementById("pswrd").value;
        if (login == "" || pswrd == "") {
            msg = "Не все поля формы заполнены. <br>";
            document.getElementById("error").innerText = msg;
            return;
        }
        let params = {};                                                     // передача учетных данных на сервер
        params["login"] = login;
        params["pswrd"] = pswrd;
        let json = JSON.stringify(params);                  //        alert(json);
        let response = await fetch('/employers',
            {   method: 'POST',
                headers: { "Content-Type": "application/json" },
                body: json
            });
        msg = await response.text();                            // alert(login + " " + pswrd + "  " + msg);
        if (msg == "-1") {
            document.getElementById("error").innerText = "Ошибка в задaнии логина или пароля";
            return;
        }
                                                                                             // подтверждение  от серве  логина/пароля модератора 
        document.getElementById("header4_log").innerText = login;
    }
</script>

